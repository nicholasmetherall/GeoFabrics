<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>geofabrics.processor &mdash; Geofabrics 0.7.6 documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/graphviz.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../index.html" class="icon icon-home"> Geofabrics
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../index.html">API Reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Geofabrics</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
      <li><code class="xref py py-mod docutils literal notranslate"><span class="pre">geofabrics.processor</span></code></li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/autoapi/geofabrics/processor/index.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-geofabrics.processor">
<span id="geofabrics-processor"></span><h1><a class="reference internal" href="#module-geofabrics.processor" title="geofabrics.processor"><code class="xref py py-mod docutils literal notranslate"><span class="pre">geofabrics.processor</span></code></a><a class="headerlink" href="#module-geofabrics.processor" title="Permalink to this headline"></a></h1>
<p>This module contains classes associated with generating hydrologically conditioned DEMs from
LiDAR and bathymetry contours based on the instructions contained in a JSON file.</p>
<dl class="simple">
<dt>The module contains the following classes:</dt><dd><ul class="simple">
<li><p>BaseProcessor - An abstract class containing methods for interpreting an instruction file
and downloading any specified LiDAR or GIS data.</p></li>
<li><p>DemGenerator - A class for generating a hydrologically conditioned DEM both on land (from LiDAR),
and offshore (from Bathymetry contours).</p></li>
<li><p>OffshoreDemGenerator - A class for adding offshore values (from bathymetry contours) to a hydrologically
conditioned DEM that has previously been generated only on Land.</p></li>
</ul>
</dd>
</dl>
<section id="module-contents">
<h2>Module Contents<a class="headerlink" href="#module-contents" title="Permalink to this headline"></a></h2>
<section id="classes">
<h3>Classes<a class="headerlink" href="#classes" title="Permalink to this headline"></a></h3>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#geofabrics.processor.BaseProcessor" title="geofabrics.processor.BaseProcessor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BaseProcessor</span></code></a></p></td>
<td><p>An abstract class with general methods for accessing elements in instruction files including populating default</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#geofabrics.processor.DemGenerator" title="geofabrics.processor.DemGenerator"><code class="xref py py-obj docutils literal notranslate"><span class="pre">DemGenerator</span></code></a></p></td>
<td><p>DemGenerator executes a pipeline for creating a hydrologically conditioned DEM from LiDAR and optionally a</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#geofabrics.processor.OffshoreDemGenerator" title="geofabrics.processor.OffshoreDemGenerator"><code class="xref py py-obj docutils literal notranslate"><span class="pre">OffshoreDemGenerator</span></code></a></p></td>
<td><p>OffshoreDemGenerator executes a pipeline for loading in a Dense DEM and extents before interpolating offshore</p></td>
</tr>
</tbody>
</table>
<dl class="py class">
<dt class="sig sig-object py" id="geofabrics.processor.BaseProcessor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">geofabrics.processor.</span></span><span class="sig-name descname"><span class="pre">BaseProcessor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">json_instructions</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.BaseProcessor" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-obj docutils literal notranslate"><span class="pre">abc.ABC</span></code></p>
<p>An abstract class with general methods for accessing elements in instruction files including populating default
values. Also contains functions for downloading remote data using geopais, and constructing data file lists.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>json_instructions</strong> (<em>json</em>) – </p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="geofabrics.processor.BaseProcessor.get_instruction_path">
<span class="sig-name descname"><span class="pre">get_instruction_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.BaseProcessor.get_instruction_path" title="Permalink to this definition"></a></dt>
<dd><p>Return the file path from the instruction file, or default if there is a default value and the local cache
is specified. Raise an error if the key is not in the instructions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>key</strong> (<em>str</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geofabrics.processor.BaseProcessor.check_instruction_path">
<span class="sig-name descname"><span class="pre">check_instruction_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.BaseProcessor.check_instruction_path" title="Permalink to this definition"></a></dt>
<dd><p>Return True if the file path exists in the instruction file, or True if there is a default value and the
local cache is specified.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>key</strong> (<em>str</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geofabrics.processor.BaseProcessor.get_resolution">
<span class="sig-name descname"><span class="pre">get_resolution</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.BaseProcessor.get_resolution" title="Permalink to this definition"></a></dt>
<dd><p>Return the resolution from the instruction file. Raise an error if not in the instructions.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geofabrics.processor.BaseProcessor.get_crs">
<span class="sig-name descname"><span class="pre">get_crs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.BaseProcessor.get_crs" title="Permalink to this definition"></a></dt>
<dd><p>Return the CRS projection information (horiztonal and vertical) from the instruction file. Raise an error
if ‘output’ is not in the instructions. If no ‘crs’ or ‘horizontal’ or ‘vertical’ values are specified then use
the default value for each one missing from the instructions.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geofabrics.processor.BaseProcessor.get_instruction_general">
<span class="sig-name descname"><span class="pre">get_instruction_general</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.BaseProcessor.get_instruction_general" title="Permalink to this definition"></a></dt>
<dd><p>Return the general instruction from the instruction file or return the default value if not specified in
the instruction file. Raise an error if the key is not in the instructions and there is no default value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>key</strong> (<em>str</em>) – </p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geofabrics.processor.BaseProcessor.get_processing_instructions">
<span class="sig-name descname"><span class="pre">get_processing_instructions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.BaseProcessor.get_processing_instructions" title="Permalink to this definition"></a></dt>
<dd><p>Return the processing instruction from the instruction file or return the default value if not specified in
the instruction file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>key</strong> (<em>str</em>) – </p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geofabrics.processor.BaseProcessor.check_apis">
<span class="sig-name descname"><span class="pre">check_apis</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.BaseProcessor.check_apis" title="Permalink to this definition"></a></dt>
<dd><p>Check to see if APIs are included in the instructions and if the key is included in specified apis</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geofabrics.processor.BaseProcessor.check_vector">
<span class="sig-name descname"><span class="pre">check_vector</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.BaseProcessor.check_vector" title="Permalink to this definition"></a></dt>
<dd><p>Check to see if vector key (i.e. land, bathymetry_contours, etc) is included either as a file path, or
within any of the vector API’s (i.e. LINZ or LRIS).</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geofabrics.processor.BaseProcessor.get_vector_paths">
<span class="sig-name descname"><span class="pre">get_vector_paths</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.BaseProcessor.get_vector_paths" title="Permalink to this definition"></a></dt>
<dd><p>Get the path to the vector key data included either as a file path or as a LINZ API. Return all paths
where the vector key is specified. In the case that an API is specified ensure the data is fetched as well.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geofabrics.processor.BaseProcessor.get_lidar_dataset_crs">
<span class="sig-name descname"><span class="pre">get_lidar_dataset_crs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_service</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.BaseProcessor.get_lidar_dataset_crs" title="Permalink to this definition"></a></dt>
<dd><p>Checks to see if source CRS of an associated LiDAR datasets has be specified in the instruction file. If it
has been specified, this CRS is returned, and will later be used to override the CRS encoded in the LAS files.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geofabrics.processor.BaseProcessor.get_lidar_file_list">
<span class="sig-name descname"><span class="pre">get_lidar_file_list</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_service</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.BaseProcessor.get_lidar_file_list" title="Permalink to this definition"></a></dt>
<dd><p>Return a dictionary with three enties ‘file_paths’, ‘crs’ and ‘tile_index_file’. The ‘file_paths’ contains a
list of LiDAR tiles to process.</p>
<p>The ‘crs’ (or coordinate system of the LiDAR data as defined by an EPSG code) is only optionally set (if unset
the value is None). The ‘crs’ should only be set if the CRS information is not correctly encoded in the LAZ/LAS
files. Currently this is only supported for OpenTopography LiDAR.</p>
<p>The ‘tile_index_file’ is also optional (if unset the value is None). The ‘tile_index_file’ should be given if a
tile index file exists for the LiDAR files specifying the extents of each tile. This is currently only supported
for OpenTopography files.</p>
<p>If a LiDAR API is specified this is checked and all files within the catchment area are downloaded and used to
construct the file list. If none is specified, the instruction ‘data_paths’ is checked for ‘lidars’ and these
are returned.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="geofabrics.processor.BaseProcessor.run">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.BaseProcessor.run" title="Permalink to this definition"></a></dt>
<dd><p>This method controls the processor execution and code-flow.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="geofabrics.processor.DemGenerator">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">geofabrics.processor.</span></span><span class="sig-name descname"><span class="pre">DemGenerator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">json_instructions</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.DemGenerator" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#geofabrics.processor.BaseProcessor" title="geofabrics.processor.BaseProcessor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BaseProcessor</span></code></a></p>
<p>DemGenerator executes a pipeline for creating a hydrologically conditioned DEM from LiDAR and optionally a
reference DEM and/or bathymetry contours. The data and pipeline logic is defined in the json_instructions file.</p>
<dl class="simple">
<dt>The <cite>DemGenerator</cite> class contains several important class members:</dt><dd><ul class="simple">
<li><p>catchment_geometry - Defines all relevant regions in a catchment required in the generation of a DEM as polygons.</p></li>
<li><p>dense_dem - Defines the hydrologically conditioned DEM as a combination of tiles from LiDAR and interpolated from
bathymetry.</p></li>
<li><p>reference_dem - This optional object defines a background DEM that may be used to fill on land gaps in the LiDAR.</p></li>
<li><p>bathy_contours - This optional object defines the bathymetry vectors used by the dense_dem to define the DEM
offshore.</p></li>
</ul>
</dd>
</dl>
<p>See the README.md for usage examples or GeoFabrics/tests/ for examples of usage and an instruction file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>json_instructions</strong> (<em>json</em>) – </p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="geofabrics.processor.DemGenerator.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.DemGenerator.run" title="Permalink to this definition"></a></dt>
<dd><p>This method executes the geofabrics generation pipeline to produce geofabric derivatives.</p>
<p>Note it currently only considers one LiDAR dataset that can have many tiles.
See ‘get_lidar_file_list’ for where to change this.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="geofabrics.processor.OffshoreDemGenerator">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">geofabrics.processor.</span></span><span class="sig-name descname"><span class="pre">OffshoreDemGenerator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">json_instructions</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.OffshoreDemGenerator" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#geofabrics.processor.BaseProcessor" title="geofabrics.processor.BaseProcessor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BaseProcessor</span></code></a></p>
<p>OffshoreDemGenerator executes a pipeline for loading in a Dense DEM and extents before interpolating offshore
DEM values. The data and pipeline logic is defined in the json_instructions file.</p>
<dl class="simple">
<dt>The <cite>DemGenerator</cite> class contains several important class members:</dt><dd><ul class="simple">
<li><p>catchment_geometry - Defines all relevant regions in a catchment required in the generation of a DEM as polygons.</p></li>
<li><p>dense_dem - Defines the hydrologically conditioned DEM as a combination of tiles from LiDAR and interpolated from
bathymetry.</p></li>
<li><p>bathy_contours - This object defines the bathymetry vectors used by the dense_dem to define the DEM
offshore.</p></li>
</ul>
</dd>
</dl>
<p>See the README.md for usage examples or GeoFabrics/tests/ for examples of usage and an instruction file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>json_instructions</strong> (<em>json</em>) – </p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="geofabrics.processor.OffshoreDemGenerator.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#geofabrics.processor.OffshoreDemGenerator.run" title="Permalink to this definition"></a></dt>
<dd><p>This method executes the geofabrics generation pipeline to produce geofabric derivatives.</p>
<p>Note it currently only considers one LiDAR dataset that may have many tiles.
See ‘get_lidar_file_list’ for where to change this.</p>
</dd></dl>

</dd></dl>

</section>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Rose Pearson.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>