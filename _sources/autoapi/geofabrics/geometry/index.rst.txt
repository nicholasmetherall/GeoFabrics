:py:mod:`geofabrics.geometry`
=============================

.. py:module:: geofabrics.geometry

.. autoapi-nested-parse::

   This module contains classes associated with manipulating vector data.



Module Contents
---------------

Classes
~~~~~~~

.. autoapisummary::

   geofabrics.geometry.CatchmentGeometry
   geofabrics.geometry.BathymetryContours
   geofabrics.geometry.MarineBathymetryPoints
   geofabrics.geometry.RiverBathymetryPoints
   geofabrics.geometry.TileInfo
   geofabrics.geometry.RiverMouthFan




.. py:class:: CatchmentGeometry(catchment_file, crs, resolution, foreshore_buffer = 2)

   A class defining revelant catchment regions by polygons.

   The CRS is a dictionary containing the EPSG code for a 'horizontal' and
   'vertical' datum.

   Specifically, this defines polygon regions like 'land', 'foreshore',
   'offshore', and ensures all regions are defined in the same CRS.

   The 'land', 'foreshore' and 'offshore' regions are clipped within the
   'catchment', but do not overlap. The 'land' is polygon is defined by a
   specified polygon which is clipped within the 'catchment'. The 'foreshore'
   is defined as a 'foreshore_buffer' x 'resolution' outward buffer from the
   'land' and within the 'catchment' extents. The 'offshore' region is any
   remaining region within the 'catchment' and outside the 'land' and
   'foreshore' polygons.

   It also supports functions for determining how much of a region is outside an exclusion zone. I.E. is outside
   `lidar_extents` see class method land_and_foreshore_without_lidar for an example.

   It is initalised with the catchment. The land must be added before the other regions (i.e. land, offshore,
   foreshore, etc) can be accessed.

   .. py:method:: catchment(self)
      :property:

      Return the catchment region


   .. py:method:: land(self)
      :property:

      Return the catchment land region


   .. py:method:: foreshore(self)
      :property:

      Return the catchment foreshore region


   .. py:method:: land_and_foreshore(self)
      :property:

      Return the catchment land and foreshore region


   .. py:method:: foreshore_and_offshore(self)
      :property:

      Return the catchment foreshore and offshore region


   .. py:method:: offshore(self)
      :property:

      Return the catchment offshore region


   .. py:method:: land_and_foreshore_without_lidar(self, dense_extents)

      Return the land and foreshore region without LiDAR


   .. py:method:: offshore_without_lidar(self, dense_extents)

      Return the offshore region without LiDAR


   .. py:method:: offshore_dense_data_edge(self, dense_extents)

      Return the offshore edge of where there is 'dense data' i.e. LiDAR or reference DEM


   .. py:method:: offshore_no_dense_data(self, lidar_extents)

      Return the offshore area where there is no 'dense data' i.e. LiDAR



.. py:class:: BathymetryContours(contour_file, catchment_geometry, z_label=None, exclusion_extent=None)

   A class for sampling from bathymetry contours.

   Assumes contours to be sampled to the catchment_geometry resolution

   .. py:method:: sample_contours(self, resolution)

      Sample the contours at the specified resolution.



.. py:class:: MarineBathymetryPoints(points_file, catchment_geometry, exclusion_extent=None)

   A class for accesing marine bathymetry points. These can be used as
   depths to interpolate elevations offshore.

   .. py:method:: points(self)
      :property:

      Return the points


   .. py:method:: x(self)
      :property:

      The x values


   .. py:method:: y(self)
      :property:

      The y values


   .. py:method:: z(self)
      :property:

      The z values



.. py:class:: RiverBathymetryPoints(points_files, polygon_files, catchment_geometry, z_labels = None)

   A class for accessing river and mouth bathymetry points. Paired river
   and mouth elevation and polygon files are expected. These depths can be
   used to interpolate elevations within the river and mouth polygon.

   .. py:method:: points_array(self)

      Sample the contours at the specified resolution.


   .. py:method:: points(self)
      :property:

      Return the points


   .. py:method:: x(self)
      :property:

      The x values


   .. py:method:: y(self)
      :property:

      The y values


   .. py:method:: z(self)
      :property:

      The z values



.. py:class:: TileInfo(tile_file, catchment_geometry)

   A class for working with tiling information.

   .. py:method:: tile_names(self)
      :property:

      Return the names of all tiles within the catchment



.. py:class:: RiverMouthFan(aligned_channel_file, river_bathymetry_file, ocean_contour_file, crs, cross_section_spacing, ocean_contour_depth_label = None)

   A class for creating an appropiate river mouth fan to transition from
   river depth estimates to the ocean bathymetry values. This fan region defines a
   transition from river to coast within a fan shaped polygon (15 degrees on each side). The fan
   begins with the most downstream river width estimate, and ends with the
   first contour of either more than 2x the depth of the mouth. This aims to ensure
   their is a defined fan that is slightly deeper than the surrounding during
   the transition.
   TODO In future,it may move to defining the width as 10x the mouth width.
   TODO deal with no width at the mouth and work upstream.

   .. attribute:: crs  The horizontal CRS to be used. i.e. EPSG

      2193

   .. attribute:: cross_section_spacing  The spacing in

      

      :type: m

   .. attribute:: aligned_channel_file  Thefile name for the aligned river channel file.

      

   .. attribute:: river_bathymetry_file  The file name for the river bathymetry values.

      

   .. attribute:: ocean_contour_file  The file name for the ocean contours.

      

   .. attribute:: ocean_contour_depth_label  The column label for the depth values.

      

   .. py:method:: polygon_and_bathymetry(self)

      Calculate and return the fan polygon values.



